@media print {
  // 隐藏不需要打印的元素
  .site-header,
  .site-footer,
  .side-content,
  .theme-toggle,
  .back-to-top,
  .comments-section,
  .share-buttons,
  .search-modal {
    display: none !important;
  }
  
  // 重置页面布局
  body {
    margin: 0;
    padding: 0;
    background: white !important;
    color: black !important;
  }
  
  .main-content {
    margin: 0 !important;
    padding: 0 !important;
    max-width: none !important;
    
    a {
      text-decoration: none !important;
      color: black !important;
      
      &::after {
        content: " (" attr(href) ")";
        font-size: 0.9em;
        color: #666;
      }
    }
  }
  
  // 优化标题样式
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
    color: black !important;
    
    a {
      color: black !important;
      
      &::after {
        content: none !important;
      }
    }
  }
  
  // 优化代码块
  pre, code {
    border: 1px solid #ddd !important;
    background: white !important;
    color: black !important;
    page-break-inside: avoid;
    white-space: pre-wrap !important;
  }
  
  // 优化表格
  table {
    border-collapse: collapse !important;
    width: 100% !important;
    page-break-inside: avoid;
    
    th, td {
      border: 1px solid #ddd !important;
      padding: 8px !important;
    }
    
    th {
      background: #f5f5f5 !important;
    }
  }
  
  // 优化图片
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }
  
  // 添加页眉页脚
  @page {
    margin: 2cm;
    
    @top-center {
      content: string(doctitle);
      font-size: 9pt;
      color: #666;
    }
    
    @bottom-center {
      content: counter(page);
      font-size: 9pt;
      color: #666;
    }
  }
  
  // 捕获文档标题
  h1:first-of-type {
    string-set: doctitle content();
  }
  
  // 分页控制
  p, blockquote, ul, ol, dl {
    orphans: 3;
    widows: 3;
  }
  
  // 强制分页
  h1, h2, h3,
  table, figure, pre {
    page-break-before: auto;
    page-break-after: avoid;
  }
  
  // 展开所有折叠内容
  details {
    display: block !important;
    
    summary {
      display: none !important;
    }
  }
  
  // 展开所有目录项
  .toc {
    .toc-list {
      display: block !important;
    }
  }
  
  // QR 码
  .page-qr {
    position: fixed;
    bottom: 0;
    right: 0;
    width: 100px;
    height: 100px;
    margin: 1cm;
    page-break-inside: avoid;
  }
}
