FROM apache/skywalking-java-agent:8.5.0-jdk8

WORKDIR /app

ENV APP_ENV=local
ENV PROJECT_NAME=app-service
ENV SERVER_PORT=8911
ENV ARTHAS_TELNET_PORT=1$SERVER_PORT
ENV ARTHAS_HTTP_PORT=2$SERVER_PORT
ENV DEBUG_PORT=3$SERVER_PORT

COPY /$PROJECT_NAME/build/libs/*.jar app.jar
ADD /deploy/docker/$APP_ENV/$PROJECT_NAME/startup.sh startup.sh

EXPOSE $SERVER_PORT $DEBUG_PORT $ARTHAS_TELNET_PORT $ARTHAS_HTTP_PORT

ENTRYPOINT ["sh","startup.sh"]
