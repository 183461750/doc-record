# .winsurfrules - Jekyll Docs Site Assistant v2.0

/* BEGIN CORE CONFIGURATION */
[PROJECT_ESSENCE]
ProjectType: Jekyll-Documentation-Site
ContentRoot: /_docs (不可更改路径)
OwnerRole: 内容创作者（专注Markdown编写）
AIRole: 技术维护者（专注网站功能）
ProtectionFocus: 
  1. 文档结构完整性
  2. 知识可访问性
  3. 构建流程稳定性
/* END CORE CONFIGURATION */

/* BEGIN DOCUMENTATION ARCHITECTURE */
[CONTENT_STRUCTURE]
├── _docs/
│   ├── 分类1/ (如: Programming)
│   │   ├── 子分类1/ (如: Python)
│   │   │   └── 笔记文件.md
│   │   └── _category.yml (分类元数据)
│   └── _config_docs.yml (自定义文档配置)
│
├── _data/
│   └── navigation.yml (主导航配置)
│
└── assets/
    └── docs/ (文档专用资源)

[CONTENT_RULES]
1. 路径规范：
   - 所有笔记必须位于_docs目录下
   - 使用中文或英文目录命名（允许拼音）
   - 支持多级嵌套分类

2. 文件规范：
   - Markdown文件名禁用特殊字符
   - 必需Front Matter字段：
     layout: doc (自定义文档布局)
     title: [必须]
     toc: true (默认开启目录)
   - 推荐Front Matter字段：
     update: YYYY-MM-DD

3. 版本安全：
   - 禁止AI直接修改已有笔记内容
   - 文档结构调整需生成迁移方案
   - 修改导航配置前自动创建快照
/* END DOCUMENTATION ARCHITECTURE */

/* BEGIN AI WORKFLOW CONTROLS */
[DEVELOPMENT_PROTOCOL]
1. 当处理文档相关需求时：
   - 优先使用Jekyll Collections配置
   - 保持URL结构：/docs/<分类>/<文档>
   - 自动生成Breadcrumb导航

2. 当修改显示层时：
   - 只能通过/_includes/docs/覆盖主题组件
   - 必须维护移动端兼容性
   - 修改后自动生成视觉对比报告

3. 当处理构建请求时：
   - 始终使用 --incremental 参数构建
   - 监控构建时间（超过45秒触发告警）
   - 自动清理_generated_cache

[SAFETY_LOCKS]
🔒 禁止操作：
   - 修改_docs现有文件路径
   - 变更Jekyll的默认Markdown解析器
   - 添加需要后端交互的功能

✅ 允许操作：
   - 优化文档渲染样式
   - 增强搜索功能（基于Lunr.js）
   - 添加文档统计功能
/* END AI WORKFLOW CONTROLS */

/* BEGIN INTELLIGENT ASSISTANCE */
[AUTO-CHECK SYSTEMS]
1. 文档健康检查：
   - 每日扫描死链（内部/外部）
   - 验证Front Matter完整性
   - 检测未分类文档

2. 智能推荐：
   - 自动建议相关文档链接
   - 识别重复内容片段
   - 生成知识图谱预览

[DIAGNOSTIC MATRIX]
<< 问题：文档无法显示 >>
诊断路径：
1. 检查_docs目录结构权限
2. 验证layout: doc是否存在
3. 查看_category.yml配置

<< 问题：搜索功能失效 >>
恢复步骤：
1. 检查lunr.js版本兼容性
2. 重建搜索索引（npm run build-search）
3. 验证JSON数据生成
/* END INTELLIGENT ASSISTANCE */

// 版本适配说明
v2.0 - 针对_docs目录专项优化 (2024-03-20)